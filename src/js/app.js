!function(){"use strict";angular.module("buscaVideo",["ngRoute","ngSanitize","ngMaterial","ngMessages"])}(),function(){"use strict";angular.module("buscaVideo").config(["$routeProvider","$locationProvider",function(e,t){e.when("/",{templateUrl:"src/html/inicial.html",controller:"inicialController"}).when("/details",{templateUrl:"src/html/details.html",controller:"detailsController"}).otherwise({redirectTo:"/"}),t.hashPrefix("")}])}(),function(){"use strict";angular.module("buscaVideo").factory("searchHttpServices",["$http",function(e){var t="AIzaSyAZ7g-fZdfwaVZ7gsm0wjQY7vxcMgK999U",s="https://www.googleapis.com/youtube/v3/search";return{defaultRequest:function(a){return e({method:"GET",url:s,params:{key:t,q:a,part:"id,snippet",maxResults:12,type:"video"}})},pageRequest:function(a,i){return e({method:"GET",url:s,params:{key:t,q:a,part:"id,snippet",pageToken:i,maxResults:12}})},videoDetailsRequest:function(s){return e({method:"GET",url:"https://www.googleapis.com/youtube/v3/videos",params:{key:t,id:s,part:"snippet,statistics,player"}})}}}])}(),function(){"use strict";angular.module("buscaVideo").factory("applicationModel",["$sce",function(e){return{searchResultModel:function(e){var t=[];return e.forEach(function(e){t.push({id:e.id.videoId||"XIMLoLxmTDw",titulo:e.snippet.title||"Sem título",descricao:e.snippet.description||"Sem descrição",thumbnail:e.snippet.thumbnails.medium.url||"https://placeholdit.co//i/320x180"})}),t},videoDetailsModel:function(t){var s={};return t.forEach(function(t){s.titulo=t.snippet.title||"Sem título",s.descricao=t.snippet.description||"Sem descrição",s.views=t.statistics.viewCount||0,s.embed=e.trustAsHtml(t.player.embedHtml)||"<p>Sem vídeo</p>"}),s}}}])}(),function(){"use strict";angular.module("buscaVideo").controller("detailsController",["$scope","$location","applicationModel","searchHttpServices",function(e,t,s,a){var i=sessionStorage.getItem("videoId");e.back=function(){t.path("/")},a.videoDetailsRequest(i).then(function(t){e.details=s.videoDetailsModel(t.data.items)})}])}(),function(){"use strict";angular.module("buscaVideo").controller("inicialController",["$scope","$location","$window","applicationModel","searchHttpServices",function(e,t,s,a,i){e.search_field=sessionStorage.getItem("termoPesquisa")||"",e.searchResults=JSON.parse(sessionStorage.getItem("listaVideos")),e.totalPages=sessionStorage.getItem("totalPaginas"),e.currentPage=sessionStorage.getItem("paginaAtual"),e.search=function(t){i.defaultRequest(t).then(function(s){var i=s.data.pageInfo;e.nextPage=s.data.nextPageToken,e.totalPages=Math.ceil(i.totalResults/12),e.currentPage=1,e.searchResults=a.searchResultModel(s.data.items),sessionStorage.setItem("listaVideos",JSON.stringify(e.searchResults)),sessionStorage.setItem("paginaAtual",e.currentPage),sessionStorage.setItem("totalPaginas",Math.ceil(i.totalResults/10)),sessionStorage.setItem("termoPesquisa",t),e.search_submit=!0})},e.getPage=function(t,s){i.pageRequest(e.search_field,t).then(function(t){e.nextPage=t.data.nextPageToken,e.prevPage=t.data.prevPageToken,e.searchResults=a.searchResultModel(t.data.items),e.currentPage=s?parseInt(e.currentPage)+1:e.currentPage-1,sessionStorage.setItem("listaVideos",JSON.stringify(e.searchResults)),sessionStorage.setItem("paginaAtual",e.currentPage)})},e.videoDetails=function(e){sessionStorage.setItem("videoId",e),t.path("/details")},e.clear=function(){sessionStorage.clear(),e.searchResults=[],e.currentPage=0,e.totalPages=0,e.search_submit=!1}}])}();